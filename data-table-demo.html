<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Table System Demo - Rebrandly Messaging</title>
    <!-- CSS -->
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/views.css">
    <link rel="stylesheet" href="css/design-system.css">
    <link rel="stylesheet" href="css/color-system-v2.css">
    <link rel="stylesheet" href="css/website-color-system.css">
    <link rel="stylesheet" href="css/website-typography.css">
    <link rel="stylesheet" href="css/workflow-design-system.css">
    <link rel="stylesheet" href="css/buttons.css">
    <link rel="stylesheet" href="css/forms.css">
    <link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/app-overrides.css">
    <link rel="stylesheet" href="css/accessibility-fixes.css">
    <link rel="stylesheet" href="css/brand-customization.css">
    <link rel="stylesheet" href="css/getting-started-improvements.css">
    <link rel="stylesheet" href="css/header-alignment.css">
    <link rel="stylesheet" href="css/modal-system.css">
    <link rel="stylesheet" href="css/data-table-system.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container" style="padding: var(--space-lg);">
        <h1 class="hero-title">Data Table System Demo</h1>
        <p class="hero-subtitle">Comprehensive table system with sorting, filtering, pagination, and bulk actions</p>

        <!-- Contacts Table Demo -->
        <section class="section-website">
            <h2 class="section-title">Contacts Management Table</h2>
            <div id="contactsTable"></div>
        </section>

        <!-- Links Table Demo -->
        <section class="section-website-light">
            <div class="container">
                <h2 class="section-title">Links Management Table</h2>
                <div id="linksTable"></div>
            </div>
        </section>

        <!-- Campaigns Table Demo -->
        <section class="section-website">
            <h2 class="section-title">Campaigns Analytics Table</h2>
            <div id="campaignsTable"></div>
        </section>

        <!-- Table Features Demo -->
        <section class="section-website-light">
            <div class="container">
                <h2 class="section-title">Table Features</h2>
                <div class="grid grid-cols-2 gap-lg">
                    <div class="card-website">
                        <h3 class="card-website-title">Core Features</h3>
                        <ul style="list-style: disc; margin-left: 20px; font-size: 14px; color: var(--color-text-secondary); line-height: 1.6;">
                            <li><strong>Sorting:</strong> Click column headers to sort data</li>
                            <li><strong>Search:</strong> Global search across all columns</li>
                            <li><strong>Filtering:</strong> Column-specific filter dropdowns</li>
                            <li><strong>Pagination:</strong> Navigate through large datasets</li>
                            <li><strong>Page Size:</strong> Adjustable rows per page</li>
                            <li><strong>Row Selection:</strong> Single and bulk selection</li>
                        </ul>
                    </div>
                    
                    <div class="card-website">
                        <h3 class="card-website-title">Advanced Features</h3>
                        <ul style="list-style: disc; margin-left: 20px; font-size: 14px; color: var(--color-text-secondary); line-height: 1.6;">
                            <li><strong>Row Actions:</strong> Edit, delete, view buttons</li>
                            <li><strong>Bulk Actions:</strong> Operations on selected rows</li>
                            <li><strong>Status Badges:</strong> Visual status indicators</li>
                            <li><strong>Custom Formatting:</strong> Date, currency, number formatting</li>
                            <li><strong>Empty States:</strong> Helpful messages when no data</li>
                            <li><strong>Loading States:</strong> Skeleton loading and spinners</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Controls -->
        <section class="section-website">
            <h2 class="section-title">Interactive Controls</h2>
            <div class="card-website">
                <h3 class="card-website-title">Test Table Features</h3>
                <div class="flex gap-sm flex-wrap" style="margin-bottom: var(--space-md);">
                    <button class="btn-website-primary" onclick="addRandomContact()">Add Random Contact</button>
                    <button class="btn-website-secondary" onclick="clearAllData()">Clear All Data</button>
                    <button class="btn-website-blue" onclick="loadSampleData()">Load Sample Data</button>
                    <button class="btn-website-secondary" onclick="showLoadingState()">Show Loading</button>
                </div>
                <div class="flex gap-sm flex-wrap">
                    <button class="btn-website-primary" onclick="exportSelected()">Export Selected</button>
                    <button class="btn-website-secondary" onclick="deleteSelected()">Delete Selected</button>
                    <button class="btn-website-blue" onclick="selectRandomRows()">Select Random Rows</button>
                </div>
            </div>
        </section>

        <!-- Technical Implementation -->
        <section class="section-website-light">
            <div class="container">
                <h2 class="section-title">Technical Implementation</h2>
                <div class="card-website">
                    <h3 class="card-website-title">DataTable Class Usage</h3>
                    <div style="background: var(--color-neutral-100); padding: var(--space-md); border-radius: var(--radius-base); margin-bottom: var(--space-md); font-family: monospace; font-size: 14px;">
<pre style="margin: 0; color: var(--color-text-primary);">// Initialize a data table
const table = new DataTable('#tableContainer', {
  data: contactsData,
  columns: [
    { key: 'name', label: 'Name', sortable: true },
    { key: 'email', label: 'Email', sortable: true },
    { key: 'status', label: 'Status', filterable: true, render: renderStatusBadge },
    { key: 'created', label: 'Created', type: 'date', sortable: true }
  ],
  pageSize: 10,
  searchable: true,
  selectable: true,
  rowActions: [
    { icon: '‚úèÔ∏è', label: 'Edit', onClick: 'editContact', type: 'edit' },
    { icon: 'üóëÔ∏è', label: 'Delete', onClick: 'deleteContact', type: 'delete' }
  ],
  bulkActions: [
    { label: 'Delete Selected', onClick: 'bulkDelete' },
    { label: 'Export Selected', onClick: 'bulkExport' }
  ]
});

// Update table data
table.updateData(newData);

// Get selected rows
const selected = table.getSelectedRows();</pre>
                    </div>
                    
                    <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Key Features:</h4>
                    <div class="grid grid-cols-2 gap-md">
                        <div>
                            <ul style="list-style: disc; margin-left: 20px; font-size: 14px; color: var(--color-text-secondary); line-height: 1.6;">
                                <li>ES6 class-based architecture</li>
                                <li>Configurable column definitions</li>
                                <li>Custom cell rendering functions</li>
                                <li>Built-in data type handling</li>
                                <li>Event delegation for performance</li>
                                <li>State management for sorting/filtering</li>
                            </ul>
                        </div>
                        <div>
                            <ul style="list-style: disc; margin-left: 20px; font-size: 14px; color: var(--color-text-secondary); line-height: 1.6;">
                                <li>Responsive design with mobile support</li>
                                <li>Accessibility with ARIA attributes</li>
                                <li>Keyboard navigation support</li>
                                <li>High contrast mode compatibility</li>
                                <li>Reduced motion preferences</li>
                                <li>Loading and empty state handling</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- JavaScript -->
    <script src="js/modal-system.js"></script>
    <script src="js/data-table-system.js"></script>
    <script>
        // Sample data for demonstrations
        const contactsData = [
            { id: 1, name: 'John Doe', company: 'Acme Corp', email: 'john@acme.com', phone: '+1-555-0123', status: 'active', created: '2024-01-15', tags: ['customer', 'vip'] },
            { id: 2, name: 'Jane Smith', company: 'Tech Solutions', email: 'jane@techsol.com', phone: '+1-555-0124', status: 'active', created: '2024-01-20', tags: ['prospect'] },
            { id: 3, name: 'Bob Johnson', company: 'StartupXYZ', email: 'bob@startupxyz.com', phone: '+1-555-0125', status: 'inactive', created: '2024-01-10', tags: ['customer'] },
            { id: 4, name: 'Alice Brown', company: 'Global Inc', email: 'alice@global.com', phone: '+1-555-0126', status: 'pending', created: '2024-01-25', tags: ['prospect', 'enterprise'] },
            { id: 5, name: 'Charlie Wilson', company: 'Local Business', email: 'charlie@local.com', phone: '+1-555-0127', status: 'active', created: '2024-01-12', tags: ['customer'] },
            { id: 6, name: 'Diana Davis', company: 'Innovation Labs', email: 'diana@innovation.com', phone: '+1-555-0128', status: 'active', created: '2024-01-18', tags: ['vip', 'enterprise'] },
            { id: 7, name: 'Eve Martinez', company: 'Creative Agency', email: 'eve@creative.com', phone: '+1-555-0129', status: 'inactive', created: '2024-01-08', tags: ['prospect'] },
            { id: 8, name: 'Frank Garcia', company: 'Consulting Group', email: 'frank@consulting.com', phone: '+1-555-0130', status: 'pending', created: '2024-01-22', tags: ['customer'] }
        ];

        const linksData = [
            { id: 1, title: 'Product Launch Page', url: 'https://example.com/product-launch', shortUrl: 'yrbrand.co/launch', clicks: 1250, status: 'active', created: '2024-01-15', lastClick: '2024-01-26' },
            { id: 2, title: 'Summer Sale Campaign', url: 'https://example.com/summer-sale', shortUrl: 'yrbrand.co/summer', clicks: 890, status: 'active', created: '2024-01-20', lastClick: '2024-01-25' },
            { id: 3, title: 'Newsletter Signup', url: 'https://example.com/newsletter', shortUrl: 'yrbrand.co/news', clicks: 456, status: 'inactive', created: '2024-01-10', lastClick: '2024-01-20' },
            { id: 4, title: 'Contact Us Page', url: 'https://example.com/contact', shortUrl: 'yrbrand.co/contact', clicks: 234, status: 'active', created: '2024-01-25', lastClick: '2024-01-26' },
            { id: 5, title: 'About Our Company', url: 'https://example.com/about', shortUrl: 'yrbrand.co/about', clicks: 678, status: 'active', created: '2024-01-12', lastClick: '2024-01-24' }
        ];

        const campaignsData = [
            { id: 1, name: 'Welcome Series', contacts: 1250, sent: 1200, delivered: 1180, clicked: 156, status: 'completed', created: '2024-01-15', cost: 120.00 },
            { id: 2, name: 'Product Announcement', contacts: 890, sent: 890, delivered: 875, clicked: 98, status: 'completed', created: '2024-01-20', cost: 89.00 },
            { id: 3, name: 'Summer Promotion', contacts: 2100, sent: 0, delivered: 0, clicked: 0, status: 'draft', created: '2024-01-25', cost: 0.00 },
            { id: 4, name: 'Customer Survey', contacts: 456, sent: 456, delivered: 445, clicked: 67, status: 'completed', created: '2024-01-10', cost: 45.60 },
            { id: 5, name: 'Event Invitation', contacts: 678, sent: 650, delivered: 640, clicked: 89, status: 'sending', created: '2024-01-22', cost: 65.00 }
        ];

        // Render functions for custom cell formatting
        function renderStatusBadge(value) {
            const statusClasses = {
                active: 'status-badge active',
                inactive: 'status-badge inactive',
                pending: 'status-badge pending',
                completed: 'status-badge active',
                draft: 'status-badge inactive',
                sending: 'status-badge pending',
                error: 'status-badge error'
            };
            return `<span class="${statusClasses[value] || 'status-badge'}">${value}</span>`;
        }

        function renderClicksWithChange(value, row) {
            const change = Math.floor(Math.random() * 20) - 10; // Random change for demo
            const changeClass = change >= 0 ? 'positive' : 'negative';
            const changeSymbol = change >= 0 ? '+' : '';
            return `
                <span class="metric-value">${value.toLocaleString()}</span>
                <span class="metric-change ${changeClass}">${changeSymbol}${change}%</span>
            `;
        }

        function renderCurrency(value) {
            return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(value);
        }

        function renderPercentage(value, row) {
            if (row.sent === 0) return '0%';
            const percentage = ((value / row.sent) * 100).toFixed(1);
            return `${percentage}%`;
        }

        // Initialize tables
        let contactsTable, linksTable, campaignsTable;

        document.addEventListener('DOMContentLoaded', function() {
            // Contacts Table
            contactsTable = new DataTable('#contactsTable', {
                title: 'Contacts',
                data: contactsData,
                columns: [
                    { key: 'name', label: 'Name', sortable: true },
                    { key: 'company', label: 'Company', sortable: true },
                    { key: 'email', label: 'Email', sortable: true },
                    { key: 'phone', label: 'Phone' },
                    { key: 'status', label: 'Status', filterable: true, render: renderStatusBadge },
                    { key: 'created', label: 'Created', type: 'date', sortable: true }
                ],
                pageSize: 5,
                searchable: true,
                selectable: true,
                rowActions: [
                    { icon: 'üëÅÔ∏è', label: 'View', onClick: 'viewContact', type: 'view' },
                    { icon: '‚úèÔ∏è', label: 'Edit', onClick: 'editContact', type: 'edit' },
                    { icon: 'üóëÔ∏è', label: 'Delete', onClick: 'deleteContact', type: 'delete' }
                ],
                bulkActions: [
                    { label: 'Export Selected', onClick: 'exportContacts' },
                    { label: 'Delete Selected', onClick: 'deleteContacts' },
                    { label: 'Add to Campaign', onClick: 'addToCampaign' }
                ],
                headerActions: [
                    { label: 'Add Contact', onClick: 'addContact' },
                    { label: 'Import CSV', onClick: 'importContacts' }
                ],
                emptyMessage: 'No contacts found. Start by adding your first contact.',
                emptyAction: { label: 'Add Contact', onClick: 'addContact' }
            });

            // Links Table
            linksTable = new DataTable('#linksTable', {
                title: 'Short Links',
                data: linksData,
                columns: [
                    { key: 'title', label: 'Title', sortable: true },
                    { key: 'shortUrl', label: 'Short URL', render: (value) => `<a href="https://${value}" target="_blank" style="color: var(--color-primary-500);">${value}</a>` },
                    { key: 'clicks', label: 'Clicks', type: 'number', sortable: true, render: renderClicksWithChange },
                    { key: 'status', label: 'Status', filterable: true, render: renderStatusBadge },
                    { key: 'created', label: 'Created', type: 'date', sortable: true },
                    { key: 'lastClick', label: 'Last Click', type: 'date', sortable: true }
                ],
                pageSize: 5,
                searchable: true,
                selectable: true,
                rowActions: [
                    { icon: 'üìä', label: 'Analytics', onClick: 'viewAnalytics', type: 'view' },
                    { icon: '‚úèÔ∏è', label: 'Edit', onClick: 'editLink', type: 'edit' },
                    { icon: 'üóëÔ∏è', label: 'Delete', onClick: 'deleteLink', type: 'delete' }
                ],
                bulkActions: [
                    { label: 'Export Analytics', onClick: 'exportAnalytics' },
                    { label: 'Archive Selected', onClick: 'archiveLinks' }
                ],
                headerActions: [
                    { label: 'Create Link', onClick: 'createLink' }
                ]
            });

            // Campaigns Table
            campaignsTable = new DataTable('#campaignsTable', {
                title: 'Campaigns',
                data: campaignsData,
                columns: [
                    { key: 'name', label: 'Campaign Name', sortable: true },
                    { key: 'contacts', label: 'Contacts', type: 'number', sortable: true },
                    { key: 'sent', label: 'Sent', type: 'number', sortable: true },
                    { key: 'delivered', label: 'Delivered', type: 'number', sortable: true, render: renderPercentage },
                    { key: 'clicked', label: 'Clicked', type: 'number', sortable: true, render: renderPercentage },
                    { key: 'status', label: 'Status', filterable: true, render: renderStatusBadge },
                    { key: 'cost', label: 'Cost', type: 'currency', sortable: true, render: renderCurrency }
                ],
                pageSize: 5,
                searchable: true,
                selectable: true,
                rowActions: [
                    { icon: 'üìä', label: 'View Report', onClick: 'viewReport', type: 'view' },
                    { icon: 'üìã', label: 'Duplicate', onClick: 'duplicateCampaign', type: 'edit' },
                    { icon: 'üóëÔ∏è', label: 'Delete', onClick: 'deleteCampaign', type: 'delete' }
                ],
                bulkActions: [
                    { label: 'Export Reports', onClick: 'exportReports' },
                    { label: 'Archive Selected', onClick: 'archiveCampaigns' }
                ],
                headerActions: [
                    { label: 'New Campaign', onClick: 'newCampaign' }
                ]
            });
        });

        // Demo action functions
        function viewContact(id) { showToast({ title: 'View Contact', message: `Viewing contact ${id}`, type: 'info' }); }
        function editContact(id) { showToast({ title: 'Edit Contact', message: `Editing contact ${id}`, type: 'info' }); }
        function deleteContact(id) { 
            showConfirmDialog({
                title: 'Delete Contact',
                message: 'Are you sure you want to delete this contact?',
                type: 'danger',
                onConfirm: () => {
                    const newData = contactsData.filter(contact => contact.id != id);
                    contactsTable.updateData(newData);
                    showToast({ title: 'Deleted', message: 'Contact deleted successfully', type: 'success' });
                }
            });
        }

        function addContact() { showToast({ title: 'Add Contact', message: 'Opening add contact form...', type: 'info' }); }
        function importContacts() { showToast({ title: 'Import Contacts', message: 'Opening CSV import...', type: 'info' }); }

        function viewAnalytics(id) { showToast({ title: 'Analytics', message: `Viewing analytics for link ${id}`, type: 'info' }); }
        function editLink(id) { showToast({ title: 'Edit Link', message: `Editing link ${id}`, type: 'info' }); }
        function deleteLink(id) { showToast({ title: 'Delete Link', message: `Deleting link ${id}`, type: 'warning' }); }
        function createLink() { showToast({ title: 'Create Link', message: 'Opening link creation form...', type: 'info' }); }

        function viewReport(id) { showToast({ title: 'Campaign Report', message: `Viewing report for campaign ${id}`, type: 'info' }); }
        function duplicateCampaign(id) { showToast({ title: 'Duplicate Campaign', message: `Duplicating campaign ${id}`, type: 'info' }); }
        function deleteCampaign(id) { showToast({ title: 'Delete Campaign', message: `Deleting campaign ${id}`, type: 'warning' }); }
        function newCampaign() { showToast({ title: 'New Campaign', message: 'Opening campaign builder...', type: 'info' }); }

        // Bulk action functions
        function exportContacts(selectedIds) { showToast({ title: 'Export', message: `Exporting ${selectedIds.length} contacts`, type: 'success' }); }
        function deleteContacts(selectedIds) { showToast({ title: 'Bulk Delete', message: `Deleting ${selectedIds.length} contacts`, type: 'warning' }); }
        function addToCampaign(selectedIds) { showToast({ title: 'Add to Campaign', message: `Adding ${selectedIds.length} contacts to campaign`, type: 'info' }); }

        // Interactive demo functions
        function addRandomContact() {
            const names = ['Michael Johnson', 'Sarah Williams', 'David Brown', 'Lisa Davis', 'James Wilson'];
            const companies = ['Tech Corp', 'Digital Solutions', 'Innovation Inc', 'Future Systems', 'Smart Business'];
            const statuses = ['active', 'inactive', 'pending'];
            
            const newContact = {
                id: Date.now(),
                name: names[Math.floor(Math.random() * names.length)],
                company: companies[Math.floor(Math.random() * companies.length)],
                email: `user${Date.now()}@example.com`,
                phone: `+1-555-${Math.floor(Math.random() * 9000) + 1000}`,
                status: statuses[Math.floor(Math.random() * statuses.length)],
                created: new Date().toISOString().split('T')[0],
                tags: ['demo']
            };
            
            contactsData.push(newContact);
            contactsTable.updateData(contactsData);
            showToast({ title: 'Contact Added', message: `Added ${newContact.name}`, type: 'success' });
        }

        function clearAllData() {
            showConfirmDialog({
                title: 'Clear All Data',
                message: 'This will remove all data from the tables. Are you sure?',
                type: 'warning',
                onConfirm: () => {
                    contactsTable.updateData([]);
                    linksTable.updateData([]);
                    campaignsTable.updateData([]);
                    showToast({ title: 'Cleared', message: 'All data cleared', type: 'info' });
                }
            });
        }

        function loadSampleData() {
            contactsTable.updateData(contactsData);
            linksTable.updateData(linksData);
            campaignsTable.updateData(campaignsData);
            showToast({ title: 'Data Loaded', message: 'Sample data restored', type: 'success' });
        }

        function showLoadingState() {
            contactsTable.showLoading();
            setTimeout(() => {
                contactsTable.hideLoading();
                showToast({ title: 'Loading Complete', message: 'Data loaded successfully', type: 'success' });
            }, 2000);
        }

        function exportSelected() {
            const selected = contactsTable.getSelectedRows();
            if (selected.length === 0) {
                showToast({ title: 'No Selection', message: 'Please select contacts to export', type: 'warning' });
            } else {
                showToast({ title: 'Export Started', message: `Exporting ${selected.length} contacts`, type: 'success' });
            }
        }

        function deleteSelected() {
            const selected = contactsTable.getSelectedRows();
            if (selected.length === 0) {
                showToast({ title: 'No Selection', message: 'Please select contacts to delete', type: 'warning' });
            } else {
                showConfirmDialog({
                    title: 'Delete Selected',
                    message: `Delete ${selected.length} selected contacts?`,
                    type: 'danger',
                    onConfirm: () => {
                        const newData = contactsData.filter(contact => !selected.includes(contact.id.toString()));
                        contactsTable.updateData(newData);
                        showToast({ title: 'Deleted', message: `${selected.length} contacts deleted`, type: 'success' });
                    }
                });
            }
        }

        function selectRandomRows() {
            // This would need to be implemented in the DataTable class
            showToast({ title: 'Random Selection', message: 'Selecting random rows...', type: 'info' });
        }
    </script>
</body>
</html>
